@model BagStore.Web.Areas.Client.Models.ProductDetailViewModel
@{
    Layout = "_LayoutBagStore";
    ViewData["Title"] = Model.Product?.TenSP ?? "Chi tiết sản phẩm";
}

<div class="container py-5">
    <div class="row">
        <!-- Hình ảnh -->
        <div class="col-md-6">
            <div class="border p-3 mb-3">
                <img src="@(Model.Images.FirstOrDefault()?.DuongDan ?? "/uploads/no-image.png")"
                     class="img-fluid w-100 rounded" alt="@Model.Product?.TenSP" />
            </div>
            <div class="d-flex flex-wrap gap-2">
                @foreach (var img in Model.Images)
                {
                    <img src="@img.DuongDan" width="80" height="80" class="border rounded p-1" />
                }
            </div>
        </div>

        <!-- Thông tin -->
        <div class="col-md-6">
            <h2 class="fw-bold mb-3">@Model.Product?.TenSP</h2>
            <p class="text-muted mb-1">Mã sản phẩm: @Model.Product?.MaSP</p>
            <h4 class="text-danger mb-3">
                @(Model.Variant?.GiaBan.ToString("N0") ?? "—") ₫
            </h4>

            <p><strong>Chất liệu:</strong> @Model.Product?.ChatLieu?.TenChatLieu</p>
            <p><strong>Thương hiệu:</strong> @Model.Product?.ThuongHieu?.TenThuongHieu</p>
            <p><strong>Loại túi:</strong> @Model.Product?.DanhMucLoaiTui?.TenLoaiTui</p>

            <div class="mb-3">
                <label class="fw-semibold">Màu sắc:</label>
                <select class="form-select w-auto d-inline-block">
                    @foreach (var c in Model.AllVariants.Select(v => v.MauSac).DistinctBy(m => m.MaMauSac))
                    {
                        <option>@c.TenMauSac</option>
                    }
                </select>
            </div>

            <div class="mb-4">
                <label class="fw-semibold">Kích thước:</label>
                <select class="form-select w-auto d-inline-block">
                    @foreach (var k in Model.AllVariants.Select(v => v.KichThuoc).DistinctBy(k => k.MaKichThuoc))
                    {
                        <option>@k.TenKichThuoc</option>
                    }
                </select>
            </div>

            <button class="btn btn-primary btn-lg">
                <i class="fas fa-shopping-cart"></i> Thêm vào giỏ
            </button>
        </div>
    </div>

    <!-- Mô tả -->
    <div class="row mt-5">
        <div class="col-12">
            <h4 class="border-bottom pb-2 mb-3">Mô tả sản phẩm</h4>
            <p>@Html.Raw(Model.Product?.MoTaChiTiet ?? "Chưa có mô tả.")</p>
        </div>
    </div>
</div>
